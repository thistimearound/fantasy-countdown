<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Schedule</title>
    <link rel="stylesheet" href="nfl-styles.css">
    <script src="nfl-scripts.js"></script>
    <script src="nfl-schedules.js"></script>
</head>
<body>
    <header id="team-header">
        <h1 id="team-name">Team Name</h1>
        <div class="logo-container">
            <img src="nfl-logo.webp" alt="NFL League Shield Logo" class="nfl-logo">
        </div>
    </header>
    <main>
        <section id="schedule">
            <h2 id="team-schedule-heading">Schedule</h2>
            <div id="team-schedule"></div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const params = new URLSearchParams(window.location.search);
                    const teamName = params.get('team');

                    if (!teamName) {
                        document.getElementById('team-name').textContent = 'Team not found';
                        document.getElementById('team-schedule').textContent = 'No schedule available';
                        return;
                    }

                    const teamClass = teamName.toLowerCase().replace(/[^a-zA-Z0-9]/g, '-');

                    const header = document.getElementById('team-header');
                    const teamNameElem = document.getElementById('team-name');
                    const scheduleContainer = document.getElementById('team-schedule');

                    teamNameElem.textContent = teamName;
                    header.className = `team-header ${teamClass}`;

                    const schedule = nflschedules[teamClass];

                    if (Array.isArray(schedule) && schedule.length) {
                        schedule.forEach(game => {
                            const gameDiv = document.createElement('div');
                            gameDiv.className = 'game';
                            const opponentClass = game.opponent.toLowerCase().replace(/[^a-zA-Z0-9]/g, '-');
                            const homeClass = game.home ? teamClass : opponentClass;
                            gameDiv.classList.add(homeClass);
                            const gameDate = new Date(game.date);
                            gameDiv.innerHTML = `
                                ${gameDate.toLocaleString()}: vs. ${game.opponent}
                                <div class="countdown" id="countdown-${gameDate.getTime()}"></div>
                            `;
                            scheduleContainer.appendChild(gameDiv);

                            updateCountdown(gameDate, `countdown-${gameDate.getTime()}`);
                            setInterval(() => updateCountdown(gameDate, `countdown-${gameDate.getTime()}`), 1000);
                        });
                    } else {
                        scheduleContainer.textContent = 'No upcoming games';
                    }
                });

                function updateCountdown(targetDate, countdownId) {
                    const now = new Date();
                    const diff = targetDate - now;

                    if (diff <= 0) {
                        document.getElementById(countdownId).textContent = 'Game in progress or completed';
                        return;
                    }

                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    document.getElementById(countdownId).textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
                }
            </script>
        </section>
    </main>
</body>
</html>